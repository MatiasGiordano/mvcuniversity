<!DOCTYPE html>
<html>
<head>
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	  <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<title>Dashboard</title>
	<meta charset="utf-8">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

	<link rel="stylesheet" type="text/css" href="static/css/dashboard.css" th:href="@{/css/dashboard.css}">
</head>
<body>
	
	<!--Modal Info Materias Disponibles-->
	<div class="modal" id="modal-info" role="dialog">
  		<div class="modal-dialog">
    		<div class="modal-content">
      			<div class="modal-header">
        			<h3 class="modal-title"  id="titulo"></h3>
      			</div>
      			<div class="modal-body">
      				<h4>Horario: 15hs lunes</h4>
      				<h4>Profesor: Seb Liotta</h4>
      				<h4>Cupo máximo: 40</h4>
      				<h4>Cupos disponibles: 2 </h4>
     			</div>
      			<div class="modal-footer">
        			<button type="button" data-dismiss="modal" class="btn btn-secondary" id="btn-close-info">Cerrar</button>
      			</div>
    		</div>
  		</div>
  	</div>

	<!--Modal Inscripción Materias Disponibles-->
	<div class="modal" id="modal-insc">
  		<div class="modal-dialog">
    		<div class="modal-content">
      			<div class="modal-header">
        			<h3 class="modal-title">Algoritmo y Estructura de Datos</h3>
      			</div>
      			<div class="modal-body">
      				<h4>Horario: 15hs lunes</h4>
      				<h4>Cupos disponibles: 2 </h4>
     			</div>
      			<div class="modal-footer">
      			<form>  
      				<button type="submit" class="btn btn-success">Inscribirse</button>
      			</form>
        			<button type="button" class="btn btn-secondary" id="btn-close-insc">Cerrar</button>
      			</div>
    		</div>
  		</div>
  	</div>

	<!--Modal Info Mis Materias-->
	<div class="modal" id="modal-info2">
  		<div class="modal-dialog">
    		<div class="modal-content">
      			<div class="modal-header">
        			<h3 class="modal-title">Sistema y Organizaciones</h3>
      			</div>
      			<div class="modal-body">
      				<h4>Horario: 15hs lunes</h4>
      				<h4>Profesor: Matias Fida</h4>
      				<h4>Duración: 2 hs</h4>
     			</div>
      			<div class="modal-footer">
        			<button type="button" class="btn btn-secondary" id="btn-close-info2">Cerrar</button>
      			</div>
    		</div>
  		</div>
  	</div>
	<!--Modal Info Profesores-->
	<div class="modal" id="modal-info3">
  		<div class="modal-dialog">
    		<div class="modal-content">
      			<div class="modal-header"> 
        			<h3 class="modal-title">Materias</h3>
      			</div>
      			<div class="modal-body">
      				<h4>Algoritmo y Estructura de Datos</h4>
      				<h5>Horario: Lunes 9.30 hs</h5>
     			</div>
      			<div class="modal-footer">
        			<button type="button" class="btn btn-secondary" id="btn-close-info3">Cerrar</button>
      			</div>
    		</div>
  		</div>
  	</div>	
	<!--Modal Agregar Profesores-->
	<div class="modal" id="modal-add-pr">
  		<div class="modal-dialog">
    		<div class="modal-content">
      			<div class="modal-header">
        			<h3 class="modal-title">Nuevo Profesor</h3>
      			</div>
      			<div class="modal-body"> 
				<form action="#" id="form-add-pr" th:action="@{/professor_register/} + ${usr.id}" th:object="${prf}" method="POST">
					<div class="input-group form-group">
						<input type="text" class="form-control" placeholder="Nombre" th:field="*{name}" required>
						<span th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>
							
					</div>
					<div class="input-group form-group">
						<input type="text" class="form-control" placeholder="Apellido" th:field="*{last_name}" required>
					</div>
					<div class="input-group form-group">
						<input type="text" class="form-control" placeholder="DNI" th:field="*{dni}" required>
					</div>
					<div class="input-group form-group">

						<input type="checkbox" style="margin-right: 15px" th:field="*{is_active}"><h5 style="margin-top: 4px">Activo</h5>
	
					</div>
					<div class="form-group">
						<input type="submit" value="Aceptar" class="btn btn-success float-right login_btn">
					</div>
				</form>
     			</div>
      			<div class="modal-footer">
        			<button type="button" class="btn btn-secondary" id="btn-close-add-pr">Cancelar</button>
      			</div>
    		</div>
  		</div>
  	</div>
	<!--Modal Agregar Materias-->
	<div class="modal" id="modal-add-mt">
  		<div class="modal-dialog">
    		<div class="modal-content">
      			<div class="modal-header">
        			<h3 class="modal-title">Nueva Materia</h3>
      			</div>
      			<div class="modal-body">
					<form id="form-add-pr" th:action="@{/subject_register/} + ${usr.id}" th:object="${subject}" method="POST">
						<div class="input-group form-group">
							<input type="text" class="form-control" placeholder="Materia" th:field="*{name}" required>	
						</div>
						<div class="input-group form-group">
							<label for="horario" style="margin-right: 15px; margin-top: 4px; font-size: 12px" >Horario</label>						
							<input type="time" step="2" id="horario" name="horario" th:field="*{schedule}" required>
						</div>
						<div class="input-group form-group">
							<input type="text" class="form-control" placeholder="Día de cursada" th:field="*{day}" required>
						</div>
						<div class="input-group form-group">
							<input type="number" class="form-control" placeholder="Duración(minutos)" th:field="*{duration}" required>
						</div>
						<div class="input-group form-group">												
							<select name="select" th:field="*{professor_id}" class="form-control">
							  	<option value="''">Elige un profesor</option>
							  	<option th:each="aprf:${prfs}"							  		 
							  		th:value="${aprf.id}" 							  		
									th:text="${aprf.last_name}"	  		
							  		></option>
							</select>  
						</div>
						<div class="input-group form-group">
							<input type="number" class="form-control" placeholder="Cupos" th:field="*{max_students}" required>
						</div>
						<div class="form-group">
							<input type="submit" value="Aceptar" class="btn btn-success float-right login_btn">
						</div>
					</form>
     			</div>
      			<div class="modal-footer">
        			<button type="button" class="btn btn-secondary" id="btn-close-add-mt">Cancelar</button>
      			</div>
    		</div>
  		</div>
  	</div>
  	<!--Modal Eliminar Materias-->
  	<div class="modal" id="modal-delete-mt">
      	<div class="modal-content">
      		<form id="form-delete-sbj" th:action="@{/subject_delete/} + ${sb.id}" th:object="${subject}" method="POST">	
      			<div class="input-group form-group">												
					<select name="select" class="form-control">
						<option value="''">Elige una materia</option>
						<option th:each="sb:${sbjs}"							  		 
							  	th:value="${sb.id}" 							  		
								th:text="${sb.name}"	  		
						></option>
					</select>  
					<input type="submit" value="Aceptar" class="btn btn-success float-right login_btn">
				</div>
			</form>					
				<button type="button" class="btn btn-secondary" id="btn-close-delete-mt">Cancelar</button>						
      	</div>  	
  	</div>

	
	<script language="JavaScript" type="text/javascript">
		function ShowHideWdn(windwsId){
			if ("wdw_mat_dis" != windwsId) document.getElementById("wdw_mat_dis").style.display="none";
			if ("wdw_mis_materias" != windwsId) document.getElementById("wdw_mis_materias").style.display="none";
			if ("wdw_profesores" != windwsId) document.getElementById("wdw_profesores").style.display="none";
			if ("wdw_materias" != windwsId) document.getElementById("wdw_materias").style.display="none";
			var x =	document.getElementById(windwsId);
			if (x.style.display=="none"){
				x.style.display= "block";
			}
			else{
				x.style.display= "none";
			}
		}
		
	</script>
	
	<h6 style="position: absolute; left: 1px; top: 1px;">Created by Matias Giordano</h6>		
	<div class="container" style="position: relative;">
		<div class="d-flex justify-content-center h-100">
			<div class="sideBar">
				<div class="input-group">
					<img class="avatar" src="static/imagenes/user.png" th:src="@{/imagenes/user.png}" >
				</div>
				<div class="input-group abs-center ">
					<h3 class="usrName" th:text="${usr.name}"></h3>
				</div>
				<div class="input-group ">
					<h3 class="usrAdmin" th:text="${usr.is_admin} ? 'Administrador' : 'Estudiante'"></h3>	
				</div>
				<div class="btns">
					<br>
					<a href="/" role="button" class="btn btn-primary btn-lg btn-block">Cerrar Sesión</a>
					<br>
					<br>
					<button  th:style="${usr.is_admin} ? 'display:none' : 'display:block'"  type="button" class="btn btn-warning btn-lg btn-block" onclick="ShowHideWdn('wdw_mat_dis')">Materias Disponibles</button>
					<button th:style="${usr.is_admin} ? 'display:none' : 'display:block'" type="button" class="btn btn-warning btn-lg btn-block" onclick="ShowHideWdn('wdw_mis_materias')">Mis Materias</button>
					<button th:style="${usr.is_admin} ? 'display:block' : 'display:none'" type="button" class="btn btn-warning btn-lg btn-block" onclick="ShowHideWdn('wdw_profesores')">Profesores</button>
					<button  th:style="${usr.is_admin} ? 'display:block' : 'display:none'" type="button" class="btn btn-warning btn-lg btn-block" onclick="ShowHideWdn('wdw_materias')">Materias</button>
				</div>	
			</div>
			<div class="mainContainer container">
				<!-- Start Materias Disponibles Window -->
				<div class="materias_disponibles" id="wdw_mat_dis" style="display: none;">
					<div class="tableContainer table-wrapper-scroll-y my-custom-scrollbar">
						<table class="table  table-striped">
  							<thead class="bg-warning">
	    						<tr>
	      							<th class="headTable" scope="col">Código</th>
	      							<th class="headTable" scope="col">Nombre</th>
	      							<th class="headTable" scope="col">Acciones</th>
	    						</tr>
	    					</thead>
	    					<tbody>                                   
	    						<tr th:each = "sbj: ${sbjs}">
		    						<td scope="row" th:text="${sbj.id}"></td>
      								<td class="table-light" style= "color: white" th:text="${sbj.name}"></td>
      								<td>
      									<button type="submit" class="btn btn-warning" id="btn-insc" title="Inscribirse" onclick="showWnwModal('modal-insc', 'btn-close-insc')">
      										<i class="fas fa-pencil-alt"></i>
      									</button>
      									<button th:attr="data-id_materia=${sbj.id}" class="btn btn-warning btn-info" id="btn-info" title="Info" onclick="showWnwModal('modal-info', 'btn-close-info')">
      										<i class="fas fa-info-circle"></i>
      									</button>
      								</td>	    							
	    						</tr>
	    					</tbody>
	    				</table>
    				</div>
				</div> <!-- End Materias Disponibles Window -->
		        <!-- Start Mis Materias Window -->
		        <div class="mis_materias" id="wdw_mis_materias" style="display: none;">
		          <div class="tableContainer table-wrapper-scroll-y my-custom-scrollbar">
		            <table class="table table-striped">
		                <thead class="bg-warning">
		                  <tr>
		                      <th class="headTable" scope="col">Código</th>
		                      <th class="headTable" scope="col">Nombre</th>
		                      <th class="headTable" scope="col">Acciones</th>
		                  </tr>
		                </thead>
		                <tbody>

		              
		                	<tr>
		                    	<td scope="row">1015</td>
		                    	<td class="table-light" style= "color: white">Sistemas y Organizaciones</td>
		                    	<td>
		                      	<button class="btn btn-warning" id="btn-info2" title="Info" onclick="showWnwModal('modal-info2', 'btn-close-info2')">
		                        	<i class="fas fa-info-circle"></i>
		                      	</button>
		              		</td>
		                  </tr>
		                </tbody>
		              </table>
		            </div>
		          </div> <!-- End Mis Materias Window -->
				<!-- Start Profesores Window -->
				<div class="profesores" id="wdw_profesores" style="display: none;">
					<div class="tableContainer table-wrapper-scroll-y my-custom-scrollbar">
						<table class="table table-striped">
  							<thead class="bg-warning">
	    						<tr>
	      							<th class="headTable" scope="col">Nombre</th>
	      							<th class="headTable" scope="col">Apellido</th>
	      							<th class="headTable" scope="col">DNI</th>
	      							<th class="headTable" scope="col">Materias</th>
	      							<th class="headTable" scope="col">Activo</th>
	    						</tr>
	    					</thead>
	    					<tbody>
	    						<tr th:each= "prf: ${prfs}">
	    							<td th:text="${prf.name}"></td>
	    							<td th:text="${prf.last_name}"></td>
	    							<td th:text="${prf.dni}"></td>
	    							<td>
	    								<button class="btn btn-warning" id="btn-info3" title="Info" onclick="showWnwModal('modal-info3','btn-close-info3')"><i class="fas fa-info-circle" ></i></button>
	    							</td>
	    							<td th:text="${prf.is_active} ? 'ACTIVO' : 'INACTIVO'"></td>
	    						</tr>
	    					</tbody>
	    				</table>
	    			</div>
	    			<div>
						<div class="col" style="text-align: center;">
							<button type="button" class="btn-change btn btn-danger">Borrar</button>
							<button type="button" class="btn-change btn btn-success" onclick="showWnwModal('modal-add-pr','btn-close-add-pr')">Agregar</button>
						</div>    					
	    			</div>
  				</div> <!-- End Profesores Window -->	
				<!-- Start Materias Window -->
				<div class="materias" id="wdw_materias" style="display: none;">
					<div class="tableContainer table-wrapper-scroll-y my-custom-scrollbar">
						<table class="table table-striped">
  							<thead class="bg-warning">
	    						<tr>
	      							<th class="headTable" scope="col">Código</th>
	      							<th class="headTable" scope="col">Nombre</th>
	      							<th class="headTable" scope="col">Horarios</th>
	      							<th class="headTable" scope="col">Día</th>
	      							<th class="headTable" scope="col">Profesor</th>
	      							<th class="headTable" scope="col">Cupo Máximo</th>
	    						</tr>
	    					</thead>
	    					<tbody>
	    						<tr th:each = "sbj: ${sbjs}">
	    							<td th:text="${sbj.id}"></td>
	    							<td th:text="${sbj.name}"></td>
	    							<td th:text="${sbj.schedule}+' hs.'"></td>
	    							<td th:text="${sbj.day}"></td>
	    						    <td th:text="${sbj.professor?.last_name}"></td>  
	    							<td th:text="${sbj.max_students}"></td> 
	    						</tr>
	    					</tbody>
	    				</table>
    				</div>
    				<div>
						<div class="col" style="text-align: center;">
							<button type="button" class="btn-change btn btn-danger" onclick="showWnwModal('modal-delete-mt','btn-close-delete-mt')">Borrar</button>
							<button type="button" class="btn-change btn btn-success" onclick="showWnwModal('modal-add-mt','btn-close-add-mt')">Agregar</button>
						</div>    					
	    			</div>	
  				</div><!-- End Materias Window -->  											
			</div>
		</div>
	</div>
<script type="text/javascript">
	function showWnwModal(wnwmodal, btnid){
		var modal= document.getElementById(wnwmodal);
		modal.style.display = "block";
		var btn = document.getElementById(btnid);
		btn.onclick = function(){
 			modal.style.display = "none";
		}
		window.onclick = function(event) {
  			if (event.target == modal) {
    			modal.style.display = "none";
  			}
		}
	$(".btn-info").click(function(){
	 var id=  $(this).data('id_materia');
	 var lista=$('#list_mat').val();
	 for(var i in lista){
		if(i.id=id){
			var mat=i;
			break;
		}
	}
	 alert(mat.name);
	})
	}

</script>


</body>

</html>